apiVersion: monitoring.grafana.com/v1alpha1
kind: PodLogs
metadata:
  name: kubernetes-pods
  labels:
    instance: primary

spec:
  relabelings:
    - action: labelmap
      regex: __meta_kubernetes_pod_label_(.+)
      replacement: $1
    - action: replace
      sourceLabels:
        - __meta_kubernetes_pod_node_name
      targetLabel: host
    - action: replace
      sourceLabels:
        - __meta_kubernetes_pod_container_name
      targetLabel: container

  namespaceSelector:
    matchNames:
      - default
      - argo
      - argocd
      - cert-manager
      - csi-s3
      - db
      - dev-ops-bot
      - gitea
      - grafana-agent
      - grafana-agent-operator
      - growi
      - japari
      - kubernetes-dashboard
      - monitor
      - moto-bot
      - nextcloud
      - ns-apps
      - ns-system
      - preview-ns
      - refsearch
      - registry
      - system-upgrade
      - traefik
      - traq
      - traq-ranking
      - vrc-tweets-fetcher
  selector:
    matchLabels: {}
