# https://grafana.com/docs/beyla/v1.2.x/configure/options/
print_traces: true

attributes:
  kubernetes:
    enable: true

discovery:
  services:
    - k8s_namespace: "^gitea$"
      k8s_pod_name: "^gitea-\\d+$"
    - k8s_namespace: "^growi$"
      k8s_pod_name: "^growi-\\d+$"
    - k8s_namespace: "^nextcloud$"
      k8s_pod_name: "^nextcloud-\\d+$"
    - k8s_namespace: "^ns-system$"
      k8s_deployment_name: "^ns-builder$"
    - k8s_namespace: "^ns-system$"
      k8s_pod_name: "^ns-controller-\\d+$"
    - k8s_namespace: "^ns-system$"
      k8s_deployment_name: "^ns-gateway$"
    - k8s_namespace: "^ns-system$"
      k8s_pod_name: "^ns-gitea-integration-\\d+$"
    - k8s_namespace: "^ns-system$"
      k8s_pod_name: "^ns-ssgen-\\d+$"
    - k8s_namespace: "^traefik$"
      k8s_pod_name: "^traefik-"
    - k8s_namespace: "^traq$"
      k8s_pod_name: "^traq-\\d+$"

routes:
  unmatched: heuristic

otel_traces_export:
  endpoint: http://tempo.monitor.svc.cluster.local:4317/
  protocol: grpc
  sampler:
    name: "parentbased_traceidratio"
    arg: "0.01"
