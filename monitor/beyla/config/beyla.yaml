# https://grafana.com/docs/beyla/latest/configure/options/
# print_traces: true # for debug

attributes:
  kubernetes:
    enable: true

discovery:
  services:
    - k8s_namespace: "^ns-system$"
    - k8s_namespace: "^ns-preview$"
    - k8s_namespace: "^refsearch$"
    - k8s_namespace: "^traq$"

routes:
  unmatched: heuristic

otel_traces_export:
  endpoint: http://tempo.monitor.svc.cluster.local:4317/
  protocol: grpc
  sampler:
    name: "always_off"
# Switch to config below once traefik v3.0.0-beta6 or later is released and "sampleRate" config is supported
#    name: "parentbased_always_off"
